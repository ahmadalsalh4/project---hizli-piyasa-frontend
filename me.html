<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profilim | Hızlı Piyasa</title>
    <link rel="stylesheet" href="../css/me.css"></link>
  </head>
  <body>
    <header>
      <div id="header"></div>
    </header>

    <div class="container">
      <!-- Profile Header Section -->
      <div class="profile-header">
        <div class="profile-pic-container">
          <img
            src="https://via.placeholder.com/150?text=Ahmet+Yılmaz"
            alt="Profil Resmi"
            class="profile-pic"
          />
        </div>
        <div class="profile-info">
          <div class="profile-name">
            <span>Ahmet Yılmaz</span>
          </div>

          <div class="profile-details">
            <div class="detail-item">
              <i class="fas fa-envelope"></i>
              <span>ahmet.yilmaz@example.com</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-phone"></i>
              <span>(555) 123 45 67</span>
            </div>
          </div>

          <div class="profile-actions">
            <button class="edit-btn">
              <i class="fas fa-edit"></i> Profili Düzenle
            </button>
            <a href="#" class="logout-btn"
              ><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a
            >
          </div>
        </div>
      </div>

      <!-- Ads Section -->
      <div class="ads-section">
        <h2 class="section-title">İlanlarım (24)</h2>

        <div class="status-tabs">
          <div class="status-tab active">Tümü</div>
          <div class="status-tab">Aktif</div>
          <div class="status-tab">Bekleyen</div>
          <div class="status-tab">Satılan</div>
        </div>

        <div class="ads-grid">
          <!-- Ad Card 1 -->

          <!-- Ad Card 2 -->
          <div class="ad-card">
            <div class="ad-image">
              <img
                src="https://via.placeholder.com/400x300?text=Macbook+Pro"
                alt="Macbook Pro"
              />
              <div class="ad-status status-active">Aktif</div>
              <div class="ad-actions">
                <div class="action-btn" title="Düzenle">
                  <i class="fas fa-edit"></i>
                </div>
                <div class="action-btn" title="Sil">
                  <i class="fas fa-trash"></i>
                </div>
              </div>
            </div>
            <div class="ad-details">
              <h3 class="ad-title">Macbook Pro M1 2020</h3>
              <div class="ad-location">
                <i class="fas fa-map-marker-alt"></i>
                İstanbul, Kadıköy
              </div>
              <div class="ad-price">18.750 TL</div>
              <div class="ad-meta">
                <span><i class="far fa-eye"></i> 189 görüntülenme</span>
                <span>1 hafta önce</span>
              </div>
            </div>
          </div>

          <!-- Ad Card 3 -->
          <div class="ad-card">
            <div class="ad-image">
              <img
                src="https://via.placeholder.com/400x300?text=Samsung+TV"
                alt="Samsung TV"
              />
              <div class="ad-status status-sold">Satıldı</div>
              <div class="ad-actions">
                <div class="action-btn" title="Tekrar Yayınla">
                  <i class="fas fa-redo"></i>
                </div>
                <div class="action-btn" title="Sil">
                  <i class="fas fa-trash"></i>
                </div>
              </div>
            </div>
            <div class="ad-details">
              <h3 class="ad-title">Samsung 55" Smart TV</h3>
              <div class="ad-location">
                <i class="fas fa-map-marker-alt"></i>
                İstanbul, Kadıköy
              </div>
              <div class="ad-price">8.500 TL</div>
              <div class="ad-meta">
                <span><i class="far fa-eye"></i> 320 görüntülenme</span>
                <span>2 hafta önce</span>
              </div>
            </div>
          </div>

          <!-- Ad Card 4 -->
          <div class="ad-card">
            <div class="ad-image">
              <img
                src="https://via.placeholder.com/400x300?text=Nike+Air+Jordan"
                alt="Nike Air Jordan"
              />
              <div class="ad-status status-pending">Bekleyen</div>
              <div class="ad-actions">
                <div class="action-btn" title="Düzenle">
                  <i class="fas fa-edit"></i>
                </div>
                <div class="action-btn" title="Sil">
                  <i class="fas fa-trash"></i>
                </div>
              </div>
            </div>
            <div class="ad-details">
              <h3 class="ad-title">Nike Air Jordan 1</h3>
              <div class="ad-location">
                <i class="fas fa-map-marker-alt"></i>
                İstanbul, Kadıköy
              </div>
              <div class="ad-price">2.400 TL</div>
              <div class="ad-meta">
                <span><i class="far fa-eye"></i> 0 görüntülenme</span>
                <span>Bugün</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div id="footer"></div>
    </footer>

    <script type="module">
      import {
        LoadBanner,
        LoadHeader,
        LogOut,
        LoadFooter,
      } from "../js/util.js";
      import { loadProductsTo } from "../js/GetAllProducts.js";
      import { UpdateProfileState } from "../js/header.js";

      document.addEventListener("DOMContentLoaded", async () => {
        await LoadHeader("header");
        await UpdateProfileState("header");
        await loadProductsTo("ads-card", "http://localhost:5000/api/ads");
        await LoadFooter("footer");
      });
      document.addEventListener("click", (e) => {
        if (e.target.id == "logoutButton") {
          LogOut();
        }
      });

      // Status tabs functionality
      const statusTabs = document.querySelectorAll(".status-tab");

      statusTabs.forEach((tab) => {
        tab.addEventListener("click", function () {
          statusTabs.forEach((t) => t.classList.remove("active"));
          this.classList.add("active");

          // Here you can filter ads based on selected status
          // For example: filterAds(this.textContent);
        });
      });

      // Ad action buttons functionality
      document.querySelectorAll(".action-btn").forEach((btn) => {
        btn.addEventListener("click", function (e) {
          e.stopPropagation();
          const action = this.querySelector("i").className;

          if (action.includes("fa-edit")) {
            // Edit action
            console.log("Edit ad");
          } else if (action.includes("fa-trash")) {
            // Delete action
            if (confirm("Bu ilanı silmek istediğinize emin misiniz?")) {
              this.closest(".ad-card").style.display = "none";
            }
          } else if (action.includes("fa-redo")) {
            // Republish action
            console.log("Republish ad");
          }
        });
      });
    </script>
  </body>
</html>
